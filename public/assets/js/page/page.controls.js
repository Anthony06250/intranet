$(document).ready(function(){"use strict";let e=new Control;$("#Controls_controlsCounter").on("change",function(){e.loadCounter(!0)}),$("input").on("change",function(){e.calcResult()}),$("#new-Controls-form, #edit-Controls-form").on("submit",function(t){e.checkEmptyRequiredField(t)})});class Control{constructor(){this.init()}init(){this.loadCounter()}loadCounter(t=!1){$("#Controls_cash_fund").val()&&!t||this.updateCashFund(),this.calcResult()}updateCashFund(){var t=$("#Controls_controlsCounter").find(":selected").attr("data-cash-fund")/100;$("#Controls_cash_fund").val(t?t.toCurrency():null)}calcResult(){let t=0;var e=$("#Controls_turnover").val().toNumber(),r=$("#Controls_cash_fund").val().toNumber();$("input[data-calc]").each(function(){t+=$(this).val()*$(this).attr("data-calc")}),$("#Controls_result").val(t?t.toCurrency():""),this.calcError(t,e||0,r||0),this.calcDebit(t,r||0)}calcError(t,e,r){t=void 0!==$("#Controls_controlsCounter").find(":selected").attr("data-reverse")?t+(e-r):t-(e+r);$("#Controls_error").val(e||r?t.toCurrency():null),this.colorError(t)}calcDebit(t,e){$("#debit-span").text((t-e).toCurrency()),this.displayDebit(t-e)}colorError(t){let e,r;switch(!0){case 0<t:e="text-success",r="text-danger";break;case t<0:e="text-danger",r="text-success"}$("#Controls_error").removeClass(r??"text-danger text-success").addClass(e)}displayDebit(t){var e=void 0!==$("#Controls_controlsCounter").find(":selected").attr("data-reverse");$("#debit-alert").css("display",t?"block":"none").removeClass(0<=t?e?"alert-primary":"alert-danger":e?"alert-danger":"alert-primary").addClass(0<=t?e?"alert-danger":"alert-primary":e?"alert-primary":"alert-danger"),$(".debit-span").text((0<=t?t:-t).toCurrency()),$("#debit-text-positive").css("display",0<=t?"block":"none"),$("#debit-text-negative").css("display",0<=t?"none":"block")}checkEmptyRequiredField(t){$("#Controls_turnover").val()||$("#Controls_result").val()||t.preventDefault()}}